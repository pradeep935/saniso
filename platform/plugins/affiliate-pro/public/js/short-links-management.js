(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initEvents()}return n=e,o=[{key:"initEvents",value:function(){var e=this;$(document).on("click",".delete-link-btn",function(t){t.preventDefault();var n=$(t.currentTarget).data("id");e.handleDeleteLink(n)}),window.addEventListener("shortLinkCreated",function(t){e.handleShortLinkCreated(t.detail)})}},{key:"handleShortLinkCreated",value:function(e){var t;e.shortLink,e.formId,window.location.pathname.includes("/short-links")&&"undefined"!=typeof Theme&&Theme.showNotice&&Theme.showSuccess((null===(t=window.affiliateTranslations)||void 0===t?void 0:t.shortLinkCreated)||"Short link created successfully!")}},{key:"handleDeleteLink",value:function(t){var n=this,o=$("#short-link-".concat(t));confirm(this.getTranslation("deleteConfirm"))&&$.ajax({type:"DELETE",url:"/customer/affiliate/short-links/".concat(t),data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(t){t.error?"undefined"!==Theme&&Theme.showNotice&&Theme.showError(t.message):("undefined"!==Theme&&Theme.showNotice&&Theme.showSuccess(t.message),o.fadeOut(300,function(){$(this).remove(),0===$(".short-link-item").length&&e.showEmptyState()}))},error:function(e){var t;"undefined"!==Theme&&Theme.showNotice&&Theme.showError((null===(t=e.responseJSON)||void 0===t?void 0:t.message)||n.getTranslation("errorOccurred"))}})}},{key:"getTranslation",value:function(e){var t;return(null===(t=window.affiliateTranslations)||void 0===t?void 0:t[e])||e}}],r=[{key:"showEmptyState",value:function(){var e=document.getElementById("short-links-empty-state-template");e&&$(".short-links-list").html(e.innerHTML)}}],o&&t(n.prototype,o),r&&t(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,r}();!function e(){"undefined"!=typeof $&&"undefined"!=typeof jQuery?$(document).ready(function(){new o}):setTimeout(e,100)}()})();